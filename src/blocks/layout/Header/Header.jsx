'use client';

import { useState, useEffect } from 'react';
import SupportBtn from './SupportBtn/SupportBtn';
import Link from 'next/link';
import { useMediaQuery } from '@react-hook/media-query';
import Navigation from './Navigation/Navigation';
import styles from './Header.module.scss';
import { usePathname } from 'next/navigation';
import SocialMedia from './SocialMedia/SocialMedia';
import ButtonHeader from './BtnHeader/ButtonHeader';

const Header = ({
  projects,
  shop,
  events,
  about,
  crew,
  gallery,
  support,
  donate,
}) => {
  const pathname = usePathname();
  const [isClicked, setIsClicked] = useState(false);

  const [fill, setFill] = useState('black');
  const isMobile = useMediaQuery('(max-width: 767px)');
  const [backgroundColor, setBackgroundColor] = useState('black');

  useEffect(() => {
    const isWhiteBackgroundRoute = [
      '/projects/mountain_instant',
      '/projects/trail',
      '/gallery/mountain_instant',
      '/gallery/trail',
      '/about',
      '/',
    ].includes(pathname);

    const newBackgroundColor =
      isWhiteBackgroundRoute && isMobile ? 'white' : 'black';

    setBackgroundColor(newBackgroundColor);
  }, [pathname, isMobile]);

  const handleClick = () => {
    setIsClicked(!isClicked);
  };

  return (
    <header className={styles.header}>
      <div className={styles.container}>
        <ButtonHeader handleClick={handleClick} isClicked={isClicked} />

        <div className={`${styles.content} ${isClicked ? styles.visible : ''}`}>
          <SupportBtn support={support} donate={donate} />

          <Navigation
            isClicked={isClicked}
            pathname={pathname}
            projects={projects}
            shop={shop}
            events={events}
            about={about}
            crew={crew}
            gallery={gallery}
            donate={donate}
          />

          <SocialMedia />
        </div>
      </div>
      <div>
        <Link href="/">
          <svg
            className={styles.img}
            width="175"
            height="65"
            viewBox="0 0 2342 875"
            fill="none"
            style={{ fill: backgroundColor }}
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              style={{ fill: backgroundColor }}
              d="M458.651 287.439C453.851 295.839 446.651 308.606 443.651 313.939C442.051 316.739 441.317 320.773 441.151 322.439C441.151 329.239 448.484 331.606 452.151 331.939H559.151C573.151 331.539 583.984 321.439 587.651 316.439L618.651 265.939C622.651 253.939 614.651 249.939 610.151 249.439H311.651C297.651 250.639 286.817 261.606 283.151 266.939L171.151 457.439C165.551 469.439 173.817 473.773 178.651 474.439H476.151C489.351 474.039 499.984 464.273 503.651 459.439L556.651 368.939C558.651 366.539 559.151 363.273 559.151 361.939C559.151 354.339 553.484 352.439 550.651 352.439H437.151C422.351 354.439 412.651 366.273 409.651 371.939L371.651 435.939C363.151 446.939 355.651 450.439 350.151 452.439C343.151 454.985 334.151 454.106 331.651 452.439C325.251 447.239 328.317 439.273 330.651 435.939L411.651 296.939C414.851 290.539 421.317 283.273 424.151 280.439C438.951 268.039 450.651 268.939 454.651 270.939C462.651 274.539 460.651 283.439 458.651 287.439Z"
            />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              style={{ fill: backgroundColor }}
              d="M758.65 298.94C762.984 289.773 776.15 271.24 794.15 270.44C799.984 269.94 810.85 272.34 807.65 285.94L781.15 331.439C777.817 337.106 766.95 349.239 750.15 352.439H599.15C593.984 352.606 581.25 356.039 571.65 368.439L518.65 456.939C515.984 462.439 514.15 473.839 528.15 475.439H825.65C830.817 475.606 843.15 472.739 851.15 459.939L962.15 272.439C966.317 265.606 971.15 251.439 957.15 249.439H659.15C653.317 249.606 639.75 253.139 632.15 265.939L603.65 313.439C601.65 318.773 600.25 329.839 610.65 331.439H724.15C729.317 330.939 741.75 326.839 750.15 314.439L758.65 298.94ZM691.65 412.939L705.65 388.939C711.65 379.939 721.65 371.939 735.65 371.939C741.65 371.773 752.25 374.939 746.65 388.939L718.65 436.939C714.984 443.439 702.75 456.039 683.15 454.439C678.317 453.439 670.45 448.239 677.65 435.439L691.65 412.939Z"
            />
            <path
              style={{ fill: backgroundColor }}
              fillRule="evenodd"
              clipRule="evenodd"
              d="M616.008 548.94C620.342 539.773 633.508 521.24 651.508 520.44C657.342 519.94 668.208 522.34 665.008 535.94L638.508 581.439C635.175 587.106 624.308 599.239 607.508 602.439H456.508C451.342 602.606 438.608 606.039 429.008 618.439L376.008 706.939C373.342 712.439 371.508 723.839 385.508 725.439H683.008C688.175 725.606 700.508 722.739 708.508 709.939L819.508 522.439C823.675 515.606 828.508 501.439 814.508 499.439H516.508C510.675 499.606 497.108 503.139 489.508 515.939L461.008 563.439C459.008 568.773 457.608 579.839 468.008 581.439H581.508C586.675 580.939 599.108 576.839 607.508 564.439L616.008 548.94ZM549.008 662.939L563.008 638.939C569.008 629.939 579.008 621.939 593.008 621.939C599.008 621.773 609.608 624.939 604.008 638.939L576.008 686.939C572.342 693.439 560.108 706.039 540.508 704.439C535.675 703.439 527.808 698.239 535.008 685.439L549.008 662.939Z"
            />
            <path
              style={{ fill: backgroundColor }}
              d="M1168.15 3.43945C1154.15 -6.56055 1139.98 7.60611 1134.65 15.9394L736.65 692.439C727.45 716.039 743.15 724.273 752.15 725.439H963.65C992.85 721.839 1013.48 700.939 1020.15 690.939L1146.15 478.939C1170.95 450.139 1198.15 446.273 1208.65 447.939C1233.05 451.139 1229.15 471.939 1224.15 481.939L1103.15 686.939C1089.15 715.739 1105.32 724.606 1115.15 725.439H1326.15C1358.95 722.239 1378.15 701.106 1383.65 690.939C1397.15 671.939 1398.65 650.939 1391.65 633.939L1294.15 470.939C1287.35 452.139 1304.65 447.773 1314.15 447.939H1489.15C1520.35 444.739 1541.82 422.273 1548.65 411.439L1601.15 320.939C1609.95 297.739 1595.82 289.939 1587.65 288.939H1370.65C1341.85 293.739 1320.98 317.606 1314.15 328.939L1290.65 367.439C1276.65 392.239 1251.15 403.773 1240.15 406.439C1198.55 412.839 1200.82 387.439 1207.15 373.939L1272.15 262.439C1293.35 232.839 1287.98 204.773 1282.65 194.439L1168.15 3.43945Z"
            />
            <path
              style={{ fill: backgroundColor }}
              d="M2169.65 270.439C2152.45 271.239 2140.48 285.439 2136.65 292.439L2095.15 362.439L2040.65 454.439C2034.65 468.039 2018.82 473.439 2011.65 474.439H1900.15C1888.55 472.039 1890.65 462.106 1893.15 457.439L2007.15 264.439C2015.55 252.439 2028.65 249.773 2034.15 249.939H2329.65C2343.25 249.939 2341.98 261.273 2339.65 266.939L2224.15 460.939C2216.95 471.739 2205.15 474.773 2200.15 474.939H2088.65C2075.85 472.939 2078.65 461.439 2081.65 455.939L2180.65 287.939C2187.45 273.939 2176.15 270.439 2169.65 270.439Z"
            />
            <path
              style={{ fill: backgroundColor }}
              d="M2020.61 520.947C2003.41 521.747 1991.44 535.947 1987.61 542.947L1946.11 612.947L1891.61 704.947C1885.61 718.547 1869.77 723.947 1862.61 724.947H1751.11C1739.51 722.547 1741.61 712.613 1744.11 707.947L1858.11 514.947C1866.51 502.947 1879.61 500.28 1885.11 500.447H2180.61C2194.21 500.447 2192.94 511.78 2190.61 517.447L2075.11 711.447C2067.91 722.247 2056.11 725.28 2051.11 725.447H1939.61C1926.81 723.447 1929.61 711.947 1932.61 706.447L2031.61 538.447C2038.41 524.447 2027.11 520.947 2020.61 520.947Z"
            />
            <path
              style={{ fill: backgroundColor }}
              fillRule="evenodd"
              clipRule="evenodd"
              d="M2.65033 771.939C0.650328 768.106 -2.14967 758.039 2.65033 748.439L139.65 516.439C142.484 511.439 151.85 501.139 166.65 499.939H467.15C471.484 500.439 478.85 504.439 473.65 516.439L362.65 705.439C359.15 712.106 347.95 725.439 331.15 725.439H181.15C174.15 726.106 157.85 732.039 148.65 750.439L81.1504 865.939C76.6504 872.273 65.8504 881.139 58.6504 865.939L2.65033 771.939ZM270.15 542.44C276.15 533.441 289.15 519.439 303.15 519.439C309.15 519.273 320.25 524.44 314.65 538.44L227.055 687.444C223.388 693.944 211.155 706.544 191.555 704.944C186.721 703.944 178.855 698.744 186.055 685.944L270.15 542.44Z"
            />
            <path
              style={{ fill: backgroundColor }}
              fillRule="evenodd"
              clipRule="evenodd"
              d="M1779.15 393.439C1774.15 394.273 1761.85 398.839 1752.65 410.439L1738.15 435.439C1734.82 441.439 1723.45 453.739 1704.65 454.939C1698.65 454.939 1688.55 450.839 1696.15 434.439L1722.15 391.439C1726.65 385.106 1739.05 372.439 1752.65 372.439H1904.65C1908.65 372.439 1919.05 369.639 1928.65 358.439L1983.65 266.939C1985.48 261.606 1986.25 250.639 1974.65 249.439H1677.15C1672.15 249.773 1660.05 253.139 1651.65 263.939L1539.15 454.439C1535.48 460.106 1531.35 472.139 1544.15 474.939H1842.65C1848.32 474.439 1861.95 470.239 1871.15 457.439L1899.15 410.439C1901.48 405.606 1903.35 395.439 1892.15 393.439H1779.15ZM1769.05 311.446L1783.05 287.446C1789.05 278.446 1799.05 270.446 1813.05 270.446C1819.05 270.279 1829.65 273.446 1824.05 287.446L1796.05 335.446C1792.39 341.946 1780.15 354.546 1760.55 352.946C1755.72 351.946 1747.85 346.746 1755.05 333.946L1769.05 311.446Z"
            />
            <path
              style={{ fill: backgroundColor }}
              fillRule="evenodd"
              clipRule="evenodd"
              d="M1631.83 643.439C1626.83 644.273 1614.53 648.839 1605.33 660.439L1590.83 685.439C1587.5 691.439 1576.13 703.739 1557.33 704.939C1551.33 704.939 1541.23 700.839 1548.83 684.439L1574.83 641.439C1579.33 635.106 1591.73 622.439 1605.33 622.439H1757.33C1761.33 622.439 1771.73 619.639 1781.33 608.439L1836.33 516.939C1838.16 511.606 1838.93 500.639 1827.33 499.439H1529.83C1524.83 499.773 1512.73 503.139 1504.33 513.939L1391.83 704.439C1388.16 710.106 1384.03 722.139 1396.83 724.939H1695.33C1701 724.439 1714.63 720.239 1723.83 707.439L1751.83 660.439C1754.16 655.606 1756.03 645.439 1744.83 643.439H1631.83ZM1621.73 561.446L1635.73 537.446C1641.73 528.446 1651.73 520.446 1665.73 520.446C1671.73 520.279 1682.33 523.446 1676.73 537.446L1648.73 585.446C1645.07 591.946 1632.83 604.546 1613.23 602.946C1608.4 601.946 1600.53 596.746 1607.73 583.946L1621.73 561.446Z"
            />
          </svg>
        </Link>
      </div>
    </header>
  );
};

export default Header;
